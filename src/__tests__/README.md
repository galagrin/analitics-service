# Тестирование приложения

## Описание тестовых сценариев

### Тесты роутинга - Routing.test.tsx

- Проверка рендеринга основных страниц по маршрутам (`/`, `/history`, `/generator`)
- Тестирование навигации через ссылки в шапке
- Проверка редиректа с кнопки "Сгенерировать больше" на странице Истории на страницу генерации запроса

### Тесты LocalStorage API - LocalStorageApi.test.tsx

- Тестирование сохранения данных в localStorage
- Получение данных из localStorage
- Полная очистка данных
- Обработка отсутствующих данных

### Тесты отправки запросов на аггрегацию данных - FileApi.test.tsx

- Корректность URL при отправке запроса на загрузку файла
- Обработка ошибок (400, 500)
- Успешная обработка валидного файла
- Проверка формата ответа

### Тесты Generator API - GeneratorApi.test.tsx

- Корректность URL при генерации отчета
- Обработка ошибок (400, 500)
- Успешная генерация отчета
- Работа с Blob и URL

### Тесты постраничные

1. HomePage:

    - тестирование начального состояния страницы
    - обработка загрузки CSV файла
    - Drag & Drop функционал
    - обработка некорректного формата файла через d&d и отображение ошибки
    - в файле Aggeration.test.tsx тестирование кейса, что при нажатии на кнопку "Отправить" отправляется запрос, запускается лоадер и показывается сообщение "Done!" в случае успеха

2. HighlightsList:

    - Отображение пустого состояния хайлайтов при отсутствии данных
    - Корректный рендер данных из стора

3. GeneratorPage:

    - Процесс генерации отчета и отображение лоадера
    - Обработка успешного результата получения сгенерироваанного отчета
    - Обработка ошибок

4. HistoryPage:

    - Загрузка данных из localStorage при рендеринге страницы
    - Очистка всей истории при нажатии на кнопку Очистить всё
    - Удаление отдельных записей на странице по клику на иконку корзину
    - в файле Modal.test.tsx тестирование открытие модельного окна при успешной обработке полученного файла и наличие в нем данных
    - в файле Modal.test.tsx тестирование того, что при клике на пунк истории, в котором нет данных и который 'нне удалось обработать' модальное окно не открывается

## Инструкции по запуску

1. Установка зависимостей:

```bash
npm install
```

2. Запуск тестов:

```bash
npm test
```

Для запуска тестов в режиме watch:

```bash
npm test -- --watch
```

Проверка нестабильных тестов

```bash
npm run test:flaky-check
```

## Используемые технологии

- **React Testing Library** - тестирование React-компонентов
- **@testing-library/user-event** - симуляция пользовательских действий
- **Vitest** - фреймворк тестирования
- **React Router** + **MemoryRouter** - тестирование маршрутизации
- **vi.mock()** - мокирование модулей
